@page "/bands/delete/{Id:guid}"
@using Showtime.Entities
@using Showtime.Repositories.Interfaces
@inject IRepositoryBand BandRepository
@inject NavigationManager NavigationManager

<h3>Delete Band</h3>

<style>
    body {
        background: url('/images/confetti.jpg') no-repeat center center fixed;
        background-size: cover;
        color: #e0e0e0;
        font-family: 'Montserrat', sans-serif;
    }

    h3 {
        font-family: 'Orbitron', sans-serif;
        font-size: 2.2rem;
        color: #fff;
        text-align: center;
        margin-bottom: 2rem;
        text-shadow: 0 0 10px #FF00FF, 0 0 20px #FF00FF;
    }

    .mb-3 {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.1);
        overflow: hidden;
        padding: 0.75rem;
        font-family: 'Montserrat', sans-serif;
        font-style: italic;
        color: #ffffff;
        max-width: 900px;
        margin: 0 auto 1rem auto;
    }

    .b-card-header,
    .b-card-footer {
        background-color: rgba(255, 255, 255, 0.05);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding: 0.75rem 1.2rem;
    }


    .b-card-title {
        font-family: 'Orbitron', sans-serif;
        font-size: 1.5rem;
        color: #ffffff; 
        text-align: center;
        text-shadow: 0 0 6px #cc0044, 0 0 10px #cc0044;
    }

    .b-card-body p {
        font-size: 1.1rem;
        color: #ccc;
    }

    

    .btn-delete {
        background-color: #cc0044;
        color: white;
        font-weight: bold;
        border: none;
        border-radius: 6px;
        padding: 0.5rem 1.2rem;
        transition: all 0.3s ease;
    }

        .btn-delete:hover {
            background-color: #cc0044;
            color: #fff;
            box-shadow: 0 0 10px rgba(255, 76, 76, 0.8);
            transform: scale(1.05);
        }

    .btn-cancel {
        background-color: #5e00a3;
        color: white;
        font-weight: bold;
        border: none;
        border-radius: 6px;
        padding: 0.5rem 1.2rem;
        transition: all 0.3s ease;
    }

        .btn-cancel:hover {
            background-color: #7a1fa2;
            color: #fff;
            box-shadow: 0 0 10px rgba(122, 31, 162, 0.7);
            transform: scale(1.05);
        }
</style>

@if (band == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <Blazorise.Card Class="mb-3 b-card">
        <CardHeader Class="b-card-header">
            <CardTitle class="b-card-title">Are you sure?</CardTitle>
        </CardHeader>
        <CardBody>
            <p>You are about to delete the band: <strong>@band.Name</strong></p>
            <p><strong>Genre:</strong> @band.Genre</p>
        </CardBody>
        <CardFooter Class="b-card-footer d-flex justify-content-end">
            <Button Class="btn-delete me-2" @onclick="DeleteBand">Yes, Delete</Button>
            <Button Class="btn-cancel" @onclick="Cancel">Cancel</Button>
        </CardFooter>
    </Blazorise.Card>

}

@code {
    [Parameter]
    public Guid Id { get; set; }

    private Band? band;

    protected override async Task OnInitializedAsync()
    {

        await Task.Delay(500);

        band = await BandRepository.GetByIdAsync(Id);
    }

    private async Task DeleteBand()
    {
        if (band is not null)
        {
            BandRepository.Delete(band);
            await BandRepository.SaveChangesAsync();
            NavigationManager.NavigateTo("/bands");
        }
    }

    private void Cancel()
    {
        NavigationManager.NavigateTo("/bands");
    }
}
