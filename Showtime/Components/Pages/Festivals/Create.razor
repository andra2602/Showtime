@page "/festivals/create"
@using Showtime.Entities
@using Showtime.Repositories.Interfaces
@using Showtime.Enums
@inject IRepositoryFestival FestivalRepo
@inject NavigationManager NavigationManager

<h3>Create</h3>
<style>
    body {
        background: url('/images/laser.jpg') no-repeat center center fixed;
        background-size: cover;
        color: #e0e0e0;
    }


    h3 {
        font-family: 'Orbitron', sans-serif;
        font-size: 2.2rem;
        color: #fff;
        text-align: center;
        margin-bottom: 2rem;
        text-shadow: 0 0 10px #FF00FF, 0 0 20px #FF00FF;
    }

    .form-container {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.1);
        padding: 2rem;
        max-width: 600px;
        margin: 0 auto;
        font-style: italic;
        color: #ffffff;
    }

    label, Label {
        font-family: 'Orbitron', sans-serif;
        font-weight: 600;
        color: #ffffff;
        text-shadow: 0 0 5px #7a1fa2;
    }

    .b-input,
    .b-select,
    select,
    input[type="text"] {
        background-color: #1a1a1a;
        border: 1px solid #444;
        border-radius: 6px;
        color: white;
        padding: 0.5rem 1rem;
        font-family: 'Montserrat', sans-serif;
        font-size: 0.95rem;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
    }

        .b-input:focus,
        .b-select:focus,
        select:focus,
        input[type="text"]:focus {
            border-color: #00ffff;
            background-color: #1a1a1a;
            color: white;
            outline: none;
            box-shadow: 0 0 8px #00ffff;
        }

    .b-validation-message {
        color: #ff4c4c;
        font-size: 0.85rem;
        margin-top: 0.3rem;
    }

    .button-group {
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
        margin-top: 2rem;
    }

    /* Save Button */
    .btn-save {
        background-color: #7a1fa2;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 0.6rem 1.5rem;
        font-weight: bold;
        transition: all 0.3s ease-in-out;
        box-shadow: 0 0 8px rgba(122, 31, 162, 0.4);
    }

        .btn-save:hover {
            background-color: #5e00a3;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 12px rgba(122, 31, 162, 0.7);
        }

    /* Back Button */
    .btn-back {
        background-color: #5e00a3;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 0.6rem 1.5rem;
        font-weight: bold;
        transition: all 0.3s ease-in-out;
        box-shadow: 0 0 8px rgba(94, 0, 163, 0.4);
    }

        .btn-back:hover {
            background-color: #7a1fa2;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 12px rgba(94, 0, 163, 0.7);
        }
</style>
<EditForm Model="@Festival" OnValidSubmit="HandleSubmit">
    <DataAnnotationsValidator />
    <Blazorise.ValidationSummary />

    <div class="form-container" style="position: relative; overflow: visible;">
        <div class="field-group" style="display: flex; flex-direction: column; gap: 1rem;">

            <Field>
                <Label>Festival Name:</Label>
                <TextEdit @bind-Text="Festival.Name" />
                <ValidationMessage For="@(() => Festival.Name)" />
            </Field>

            <Field>
                <Label>Festival Location:</Label>
                <TextEdit @bind-Text="Festival.Location" />
                <ValidationMessage For="@(() => Festival.Location)" />
            </Field>

            <Field>
                <Label>Start Date:</Label>
                <DatePicker TValue="DateTime?" @bind-Date="Festival.StartDate" />
                <ValidationMessage For="@(() => Festival.StartDate)" />
            </Field>

            <Field>
                <Label>End Date:</Label>
                <DatePicker TValue="DateTime?" @bind-Date="Festival.EndDate" />
                <ValidationMessage For="@(() => Festival.EndDate)" />
            </Field>

            <Field>
                <Label>Festival Price:</Label>
                <NumericEdit TValue="float" @bind-Value="Festival.Price" />
                <ValidationMessage For="@(() => Festival.Price)" />
            </Field>
            

            <Field>
                <Label>Festival Description:</Label>
                <TextEdit @bind-Text="Festival.Description" />
                <ValidationMessage For="@(() => Festival.Description)" />
            </Field>
        </div>

        <div class="button-group">
            <Button Class="btn-save" Type="ButtonType.Submit">Save</Button>
            <Button Class="btn-back" Clicked="@GoBack">Back to the list</Button>
        </div>
    </div>
</EditForm>



@code {
    private Festival Festival { get; set; } = new Festival();
   
    private async Task HandleSubmit()
    {
        await FestivalRepo.AddAsync(Festival);
        await FestivalRepo.SaveChangesAsync();
        NavigationManager.NavigateTo("/festivals");
    }

    private void GoBack()
    {
        NavigationManager.NavigateTo("/festivals");
    }
}
